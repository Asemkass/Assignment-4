services: 
 
  prometheus: 
    image: prom/prometheus:latest 
    container_name: prometheus 
    ports: 
      - "9090:9090" 
    volumes: 
      - ./config/prometheus.yml:/etc/prometheus/prometheus.yml:ro 
      - prometheus_data:/prometheus 
    command: 
      - '--config.file=/etc/prometheus/prometheus.yml' 
      - '--storage.tsdb.path=/prometheus' 
      - '--web.enable-lifecycle' 
    networks: 
      - monitoring 
    restart: unless-stopped 
 
  postgres_exporter: 
    image: prometheuscommunity/postgres-exporter:latest 
    container_name: postgres_exporter 
    ports: 
      - "9187:9187" 
    environment: 
      DATA_SOURCE_NAME: "postgresql://postgres:0000@host.docker.internal:5432/postgres?sslmode=disable" 
    networks: 
      - monitoring 
    restart: unless-stopped 
 
  node_exporter: 
    image: prom/node-exporter:latest 
    container_name: node_exporter 
    ports: 
      - "9100:9100" 
    networks: 
      - monitoring 
    restart: unless-stopped 
 
  grafana: 
    image: grafana/grafana:latest 
    container_name: grafana 
    ports: 
      - "3000:3000" 
    volumes: 
      - grafana_data:/var/lib/grafana 
    environment: 
      - GF_SECURITY_ADMIN_PASSWORD=admin 
    networks: 
      - monitoring 
    restart: unless-stopped 
 
volumes: 
  prometheus_data: 
  grafana_data: 
 
networks: 
  monitoring: 
    driver: bridge 
